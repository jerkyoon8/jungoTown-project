<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
<head>
    <title>메인 페이지</title>
    <th:block layout:fragment="css">
        <style>
            .carousel-item img {
                max-height: 400px;
                object-fit: cover;
                width: 100%;
            }
            .carousel-caption {
                background-color: rgba(0, 0, 0, 0.5);
                border-radius: .5rem;
                padding: 1rem;
            }
            .section-divider {
                margin-top: 2rem;
                margin-bottom: 2rem;
            }
        </style>
    </th:block>
</head>
<main layout:fragment="content">
    <!-- 캐러셀 시작 -->
    <div id="homeCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button th:each="item, stat : ${carouselItems}"
                    type="button"
                    data-bs-target="#homeCarousel"
                    th:data-bs-slide-to="${stat.index}"
                    th:classappend="${stat.first} ? 'active'"
                    th:aria-current="${stat.first} ? 'true'"
                    th:aria-label="'Slide ' + ${stat.count}">
            </button>
        </div>
        <div class="carousel-inner">
            <div th:each="item, stat : ${carouselItems}"
                 class="carousel-item"
                 th:classappend="${stat.first} ? 'active'"
                 data-bs-interval="5000">
                <img th:src="@{${item.image}}" class="d-block w-100" alt="Carousel Image">
                <div class="carousel-caption d-none d-md-block">
                    <h5 th:text="${item.title}"></h5>
                    <p th:text="${item.description}"></p>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#homeCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#homeCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <!-- 캐러셀 끝 -->

    <!-- 구분선 -->
    <hr class="section-divider"/>

    <!-- 최근 본 상품 목록 프래그먼트 삽입 -->
    <div th:replace="~{fragments/recent_products :: recentProductsFragment}"></div>
</main>
</html>